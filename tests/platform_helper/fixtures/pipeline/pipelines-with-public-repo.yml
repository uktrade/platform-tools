environments:
  - name: dev
    accounts:
      deploy:
        name: "dev-deploy-account"
        id: "1111111111"
      dns:
        name: "dev-dns-account"
        id: "2222222222"
  - name: prod
    accounts:
      deploy:
        name: "prod-deploy-account"
        id: "3333333333"
      dns:
        name: "prod-dns-account"
        id: "4444444444"
    requires_approval: true

codebases:
  - name: application
    repository: organisation/repository
    additional_ecr_repository: public.ecr.aws/uktrade-platform-sandbox/demodjango/application
    services:
      - web
    pipelines:
      - name: main
        branch: main
        environments:
          - name: dev
      - name: tagged
        tag: true
        environments:
          - name: staging
          - name: prod
            requires_approval: true
